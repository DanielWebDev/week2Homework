/*
 * history.js: Example of using the prompt history capabilities.
 *
 * (C) 2010, Nodejitsu Inc.
 *
 */

var prompt = require('../lib/prompt');

var useValue = '';

//
// Start the prompt
//
console.log('got to A');

prompt.start();

console.log('got to B');

console.log('useValue = ' + useValue);

var properties = {
  properties: {
    animal: {
      description: 'Enter an animal',
      default: 'dog',
      pattern: /dog|cat/
    },
    sound: {
      description: 'What sound does this animal make?',
      conform: function (value) {
        var animal = prompt.history(0).value;

        return animal === 'dog' && value === 'woof'
          || animal === 'cat' && value === 'meow';
      }
    }
  }
}

console.log('got to C');
//console.log('new result = ' + result.animal);

//
// Get two properties from the user
//
prompt.get(properties, function (err, result) {
  //
  // Log the results.
  //
  console.log('got to D');

  useValue = result.animal;

  console.log(useValue);

  console.log('Command-line input received:');
  console.log('  animal: ' + result.animal);
  console.log('  sound: ' + result.sound);
});

//console.log('got to E');
